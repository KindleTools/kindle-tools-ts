# ðŸ“Š 1.4 AnÃ¡lisis de Complejidad CiclomÃ¡tica

> AnÃ¡lisis de funciones complejas - 18 de enero de 2026

## 1. Funciones Largas (>50 lÃ­neas)

| FunciÃ³n | Archivo | LÃ­neas | Complejidad |
|---------|---------|--------|-------------|
| `CsvImporter.doImport()` | csv.importer.ts | **272** | ðŸ”´ Alta |
| `JoplinExporter.processBook()` | joplin.exporter.ts | **141** | ðŸŸ¡ Media |
| `parseString()` | parser.ts | **137** | ðŸŸ¡ Media |
| `JsonImporter.doImport()` | json.importer.ts | **135** | ðŸŸ¡ Media |
| `parseBlock()` | parser.ts | **88** | ðŸŸ¢ Baja |

### ðŸ”´ CsvImporter.doImport() - 272 lÃ­neas

**Problemas:**
- Loop con validaciÃ³n anidada (4 niveles)
- Try-catch con mucha lÃ³gica
- Mezcla parsing + validaciÃ³n + construcciÃ³n

**Sugerencia:**
```
doImport() â†’ parseHeaders() + validateRow() + rowToClipping()
```

---

## 2. Complejidad Alta

| Archivo | FunciÃ³n | Nivel Anidamiento |
|---------|---------|-------------------|
| `csv.importer.ts:246-368` | Loop parsing | ðŸ”´ 4 niveles |
| `parser.ts:79-134` | parseString | ðŸŸ¡ 3 niveles |
| `joplin.exporter.ts:271-412` | processBook | ðŸŸ¡ 3 niveles |

---

## 3. Archivos MonolÃ­ticos (>300 lÃ­neas)

| Archivo | LÃ­neas | Â¿Dividir? |
|---------|--------|-----------|
| `joplin.exporter.ts` | **514** | ðŸŸ¡ Extraer tipos |
| `templates/presets.ts` | **519** | âœ… OK (datos) |
| `parser.ts` | **450** | âœ… OK |
| `csv.importer.ts` | **388** | ðŸŸ¡ Extraer schema |

---

## 4. Dependencias Circulares

**NO hay dependencias circulares** âœ…

```
domain/ â† core/ â† importers/exporters/
   â†‘         â†‘
   â””â”€â”€ utils/ â†â”˜
```

---

## Plan de SimplificaciÃ³n

### ðŸ”´ Alta Prioridad
- `csv.importer.ts`: Extraer helpers de validaciÃ³n

### ðŸŸ¡ Media Prioridad  
- `joplin.exporter.ts`: Extraer tipos a archivo separado
- `json.importer.ts`: Extraer conversiÃ³n como helper

---

## ConclusiÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Funciones >50 lÃ­neas: 7                                     â”‚
â”‚ Funciones problemÃ¡ticas: 1                                  â”‚
â”‚ Archivos >300 lÃ­neas: 6                                     â”‚
â”‚ Dependencias circulares: 0                                  â”‚
â”‚ Nivel de complejidad: MEDIO                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
